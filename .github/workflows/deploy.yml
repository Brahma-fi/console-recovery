name: Deploy to IPFS

permissions:
  contents: read
  pull-requests: write
  statuses: write

on:
  push:
    branches:
      - main
  pull_request:

jobs:
  deploy:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout code
        uses: actions/checkout@v4

      - name: Setup Node.js
        uses: actions/setup-node@v4
        with:
          node-version: 'lts/*'
          cache: 'npm'

      - name: Install dependencies
        run: npm i

      - name: Build project
        run: NEXT_PUBLIC_PRIVY_APP_ID=clwko6rul0a5r10xnb2ikkjhd npm run build

      - name: Deploy to IPFS
        uses: ipfs/ipfs-deploy-action@v1.7.0
        id: deploy
        with:
          path-to-deploy: dist # Change this to your build output directory
          storacha-key: MgCYzJFxb/8EN1dQrU6W/B5pTb2B23QN2vIPzBT3eCO0Yc+0BC3F5cMJEqlb364VN0AI8Zofk+p5TBAZ8aZUv684zcTY=
          storacha-proof: mAYIEAKQUOqJlcm9vdHOB2CpYJQABcRIgiZpSMCjLVkNnAhR7cgMq8/WsL9o//tG+0ba5BlOX4+VndmVyc2lvbgHyBgFxEiCQiNRN9POBxaM7K1zUkMJWx31/17ChEIThpvF2O/DOBahhc1hE7aEDQP2lApZD/Pech9IZJZbfHDnG8Sp2bHIqd3/1bavlMwkEL+TqQys8uimP0tind+iUwy85WdGcBqf4j3dw34R8jQhhdmUwLjkuMWNhdHSIomNjYW5nc3BhY2UvKmR3aXRoeDhkaWQ6a2V5Ono2TWtxdnFZbks0QWRYdTlSZnBLNFJhMXFKQXY3WVRMWXRWSFlkWlJxdnpWZUZETKJjY2FuZmJsb2IvKmR3aXRoeDhkaWQ6a2V5Ono2TWtxdnFZbks0QWRYdTlSZnBLNFJhMXFKQXY3WVRMWXRWSFlkWlJxdnpWZUZETKJjY2FuZ2luZGV4Lypkd2l0aHg4ZGlkOmtleTp6Nk1rcXZxWW5LNEFkWHU5UmZwSzRSYTFxSkF2N1lUTFl0VkhZZFpScXZ6VmVGREyiY2NhbmdzdG9yZS8qZHdpdGh4OGRpZDprZXk6ejZNa3F2cVluSzRBZFh1OVJmcEs0UmExcUpBdjdZVExZdFZIWWRaUnF2elZlRkRMomNjYW5odXBsb2FkLypkd2l0aHg4ZGlkOmtleTp6Nk1rcXZxWW5LNEFkWHU5UmZwSzRSYTFxSkF2N1lUTFl0VkhZZFpScXZ6VmVGREyiY2NhbmhhY2Nlc3MvKmR3aXRoeDhkaWQ6a2V5Ono2TWtxdnFZbks0QWRYdTlSZnBLNFJhMXFKQXY3WVRMWXRWSFlkWlJxdnpWZUZETKJjY2FuamZpbGVjb2luLypkd2l0aHg4ZGlkOmtleTp6Nk1rcXZxWW5LNEFkWHU5UmZwSzRSYTFxSkF2N1lUTFl0VkhZZFpScXZ6VmVGREyiY2Nhbmd1c2FnZS8qZHdpdGh4OGRpZDprZXk6ejZNa3F2cVluSzRBZFh1OVJmcEs0UmExcUpBdjdZVExZdFZIWWRaUnF2elZlRkRMY2F1ZFgi7QFdyYqJK2i21B2OFch7R03DRoOOsSSGTjth3aZai1NS2GNleHAaaud0LGNmY3SBoWVzcGFjZaJkbmFtZW9icmFobWFfcmVjb3ZlcnlmYWNjZXNzoWR0eXBlZnB1YmxpY2Npc3NYIu0BqoEezZ7jbB6Eg/wuTXTrf1yldGaC5rIev9hn44h3pCtjcHJmgPIGAXESIOiye23BpIG55C/LoUV/ZaQ4kMKI+jY+7yPdMfs6IileqGFzWETtoQNAvXQuUZmHGxkt9XjsPhAIjGIQNUIh/+ZTQ4ln+mg9v0/iaLLKp+JC6uJQx707CcGtASTnDL6xwfrfOUqdwDdTAWF2ZTAuOS4xY2F0dIiiY2NhbmdzcGFjZS8qZHdpdGh4OGRpZDprZXk6ejZNa3F2cVluSzRBZFh1OVJmcEs0UmExcUpBdjdZVExZdFZIWWRaUnF2elZlRkRMomNjYW5mYmxvYi8qZHdpdGh4OGRpZDprZXk6ejZNa3F2cVluSzRBZFh1OVJmcEs0UmExcUpBdjdZVExZdFZIWWRaUnF2elZlRkRMomNjYW5naW5kZXgvKmR3aXRoeDhkaWQ6a2V5Ono2TWtxdnFZbks0QWRYdTlSZnBLNFJhMXFKQXY3WVRMWXRWSFlkWlJxdnpWZUZETKJjY2FuZ3N0b3JlLypkd2l0aHg4ZGlkOmtleTp6Nk1rcXZxWW5LNEFkWHU5UmZwSzRSYTFxSkF2N1lUTFl0VkhZZFpScXZ6VmVGREyiY2Nhbmh1cGxvYWQvKmR3aXRoeDhkaWQ6a2V5Ono2TWtxdnFZbks0QWRYdTlSZnBLNFJhMXFKQXY3WVRMWXRWSFlkWlJxdnpWZUZETKJjY2FuaGFjY2Vzcy8qZHdpdGh4OGRpZDprZXk6ejZNa3F2cVluSzRBZFh1OVJmcEs0UmExcUpBdjdZVExZdFZIWWRaUnF2elZlRkRMomNjYW5qZmlsZWNvaW4vKmR3aXRoeDhkaWQ6a2V5Ono2TWtxdnFZbks0QWRYdTlSZnBLNFJhMXFKQXY3WVRMWXRWSFlkWlJxdnpWZUZETKJjY2FuZ3VzYWdlLypkd2l0aHg4ZGlkOmtleTp6Nk1rcXZxWW5LNEFkWHU5UmZwSzRSYTFxSkF2N1lUTFl0VkhZZFpScXZ6VmVGRExjYXVkWCLtAV3JiokraLbUHY4VyHtHTcNGg46xJIZOO2HdplqLU1LYY2V4cBpq53R8Y2ZjdIGhZXNwYWNlomRuYW1lb2JyYWhtYV9yZWNvdmVyeWZhY2Nlc3OhZHR5cGVmcHVibGljY2lzc1gi7QGqgR7NnuNsHoSD/C5NdOt/XKV0ZoLmsh6/2GfjiHekK2NwcmaApQUBcRIgB8YVnL7GulKA0P9jy/je8sOCx8QRxqRV29JOrzAID9KoYXNYRO2hA0C5MX6/HpkYsmBsUKjx/gxSui6ssq/nFyuZuwG03lN1m1ePXAb6zPCpLpjgnaltbdctwC7ls/i92NJhm44ThFADYXZlMC45LjFjYXR0hKJjY2FubnNwYWNlL2Jsb2IvYWRkZHdpdGh4OGRpZDprZXk6ejZNa3F2cVluSzRBZFh1OVJmcEs0UmExcUpBdjdZVExZdFZIWWRaUnF2elZlRkRMomNjYW5vc3BhY2UvaW5kZXgvYWRkZHdpdGh4OGRpZDprZXk6ejZNa3F2cVluSzRBZFh1OVJmcEs0UmExcUpBdjdZVExZdFZIWWRaUnF2elZlRkRMomNjYW5uZmlsZWNvaW4vb2ZmZXJkd2l0aHg4ZGlkOmtleTp6Nk1rcXZxWW5LNEFkWHU5UmZwSzRSYTFxSkF2N1lUTFl0VkhZZFpScXZ6VmVGREyiY2Nhbmp1cGxvYWQvYWRkZHdpdGh4OGRpZDprZXk6ejZNa3F2cVluSzRBZFh1OVJmcEs0UmExcUpBdjdZVExZdFZIWWRaUnF2elZlRkRMY2F1ZFgi7QELcXlwwkSqVvfrhU3QAjxmh+T6nlMEBnxplS/rzjNxNmNleHD2Y2ZjdIGhZXNwYWNlomRuYW1lb2JyYWhtYV9yZWNvdmVyeWZhY2Nlc3OhZHR5cGVmcHVibGljY2lzc1gi7QFdyYqJK2i21B2OFch7R03DRoOOsSSGTjth3aZai1NS2GNwcmaC2CpYJQABcRIgkIjUTfTzgcWjOytc1JDCVsd9f9ewoRCE4abxdjvwzgXYKlglAAFxEiDosnttwaSBueQvy6FFf2WkOJDCiPo2Pu8j3TH7OiIpXlkBcRIgiZpSMCjLVkNnAhR7cgMq8/WsL9o//tG+0ba5BlOX4+WhanVjYW5AMC45LjHYKlglAAFxEiAHxhWcvsa6UoDQ/2PL+N7yw4LHxBHGpFXb0k6vMAgP0g
          github-token: ${{ github.token }}